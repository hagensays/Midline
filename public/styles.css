:root {
  --bg-deep: #0a1418;
  --bg-mid: #10242c;
  --panel-bg: #111f25;
  --panel-border: #25404c;
  --text-main: #e9f5f2;
  --text-dim: #9bc1b8;
  --accent: #ffc24a;
  --accent-2: #66e7c1;
  --btn-bg: #18313b;
  --btn-bg-hover: #224351;
  --font-ui: "Trebuchet MS", "Segoe UI Variable", "Segoe UI", sans-serif;
  --font-view: "Consolas", "Lucida Console", monospace;
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  height: 100%;
}

body {
  font-family: var(--font-ui);
  color: var(--text-main);
  background:
    radial-gradient(1200px 700px at 20% 10%, #193843 0%, transparent 58%),
    radial-gradient(900px 600px at 90% 70%, #234a56 0%, transparent 60%),
    linear-gradient(145deg, var(--bg-deep), var(--bg-mid));
}

.layout {
  min-height: 100%;
  display: grid;
  grid-template-columns: minmax(320px, 420px) 1fr;
  gap: 16px;
  padding: 16px;
}

.panel {
  border: 1px solid var(--panel-border);
  border-radius: 16px;
  background: color-mix(in srgb, var(--panel-bg) 92%, black 8%);
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  box-shadow: 0 18px 60px rgba(0, 0, 0, 0.35);
}

h1 {
  margin: 0;
  font-size: 1.7rem;
  letter-spacing: 0.02em;
}

.panel-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.theme-btn {
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 0.83rem;
  line-height: 1;
}

.theme-picker {
  display: none;
}

.subhead {
  margin: 0;
  color: var(--text-dim);
  font-size: 0.92rem;
}

.card {
  border: 1px solid var(--panel-border);
  border-radius: 12px;
  padding: 10px;
  background: linear-gradient(170deg, rgba(21, 39, 47, 0.95), rgba(14, 30, 36, 0.95));
}

h2 {
  margin: 0 0 8px;
  font-size: 1rem;
}

textarea,
select,
button,
input {
  font: inherit;
}

textarea {
  width: 100%;
  min-height: 130px;
  resize: vertical;
  border-radius: 10px;
  border: 1px solid #2d505f;
  background: #0f2027;
  color: var(--text-main);
  padding: 10px;
}

select {
  width: 100%;
  border-radius: 10px;
  border: 1px solid #2d505f;
  background: #0f2027;
  color: var(--text-main);
  padding: 8px;
}

button {
  border-radius: 10px;
  border: 1px solid #2d505f;
  background: var(--btn-bg);
  color: var(--text-main);
  padding: 9px 10px;
  cursor: pointer;
  transition: background-color 150ms ease, transform 100ms ease;
}

button:hover {
  background: var(--btn-bg-hover);
}

button:active {
  transform: translateY(1px);
}

button.primary {
  border-color: #4ea78f;
  background: linear-gradient(140deg, #205041, #2d7b61);
}

button.primary:hover {
  background: linear-gradient(140deg, #26614e, #369171);
}

.row {
  margin-top: 8px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.card:nth-of-type(3) .row {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.hint {
  margin: 0 0 8px;
  color: var(--text-dim);
  font-size: 0.85rem;
}

.control {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.control span {
  min-width: 68px;
}

input[type="range"] {
  width: 100%;
}

output {
  min-width: 68px;
  text-align: right;
  color: var(--accent-2);
}

.tiny-loop {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin: 2px 0 8px;
  font-size: 0.78rem;
  color: var(--text-dim);
  user-select: none;
}

.tiny-loop input[type="checkbox"] {
  width: 28px;
  height: 16px;
  appearance: none;
  border: 1px solid #2d505f;
  border-radius: 999px;
  background: #10232b;
  cursor: pointer;
  position: relative;
  transition: background-color 120ms ease, border-color 120ms ease;
}

.tiny-loop input[type="checkbox"]::after {
  content: "";
  position: absolute;
  top: 1px;
  left: 1px;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #7ea99f;
  transition: transform 120ms ease, background-color 120ms ease;
}

.tiny-loop input[type="checkbox"]:checked {
  background: #205041;
  border-color: #4ea78f;
}

.tiny-loop input[type="checkbox"]:checked::after {
  transform: translateX(12px);
  background: #d6f5ea;
}

.status {
  margin: 10px 0 0;
  color: var(--text-dim);
  min-height: 1.2rem;
}

.viewer {
  border: 1px solid #284855;
  border-radius: 16px;
  background:
    radial-gradient(1000px 550px at 50% 80%, rgba(45, 123, 97, 0.2), transparent 75%),
    linear-gradient(165deg, #081117, #0b1a22);
  box-shadow: 0 20px 70px rgba(0, 0, 0, 0.4);
  display: grid;
  grid-template-rows: 1fr auto;
  min-height: 420px;
}

.stage {
  position: relative;
  overflow: hidden;
  min-height: 340px;
  border-radius: 15px 15px 0 0;
}

.stage-glow {
  position: absolute;
  inset: 0;
  background:
    linear-gradient(to right, rgba(255, 194, 74, 0.08), transparent 18%, transparent 82%, rgba(255, 194, 74, 0.08)),
    radial-gradient(60% 45% at 50% 50%, rgba(102, 231, 193, 0.08), transparent 75%);
  pointer-events: none;
}

.moving-text {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translate3d(0, -50%, 0);
  font-family: var(--font-view);
  font-size: 56px;
  line-height: 1;
  font-weight: 700;
  letter-spacing: 0.01em;
  color: #f5fbf9;
  text-shadow: 0 2px 14px rgba(0, 0, 0, 0.45);
  white-space: nowrap;
  will-change: transform;
}

.viewer-help {
  margin: 0;
  padding: 8px 12px 10px;
  color: var(--text-dim);
  font-size: 0.9rem;
}

code {
  color: #b5efd9;
}

@media (max-width: 980px) {
  .layout {
    grid-template-columns: 1fr;
  }

  .viewer {
    min-height: 280px;
  }

  .moving-text {
    font-size: 44px;
  }
}

body[data-theme="solarized-slate"] {
  color: #e6efff;
  background:
    radial-gradient(1200px 700px at 20% 10%, #1d3355 0%, transparent 58%),
    radial-gradient(900px 600px at 90% 70%, #2f4f73 0%, transparent 60%),
    linear-gradient(145deg, #0d1522, #18263b);
}

body[data-theme="solarized-slate"] .panel {
  border-color: #3c577a;
  background: #122037;
}

body[data-theme="solarized-slate"] .subhead,
body[data-theme="solarized-slate"] .hint,
body[data-theme="solarized-slate"] .status,
body[data-theme="solarized-slate"] .viewer-help,
body[data-theme="solarized-slate"] .tiny-loop {
  color: #9fb6d8;
}

body[data-theme="solarized-slate"] .card {
  border-color: #3c577a;
  background: linear-gradient(170deg, #152741, #102034);
}

body[data-theme="solarized-slate"] textarea,
body[data-theme="solarized-slate"] select {
  border-color: #3c577a;
  background: #101f33;
  color: #eef5ff;
}

body[data-theme="solarized-slate"] button {
  border-color: #3c577a;
  background: #203a5d;
  color: #e9f2ff;
}

body[data-theme="solarized-slate"] button:hover {
  background: #294971;
}

body[data-theme="solarized-slate"] button.primary {
  border-color: #72b4f3;
  background: linear-gradient(140deg, #2f5f93, #3f88cc);
}

body[data-theme="solarized-slate"] button.primary:hover {
  background: linear-gradient(140deg, #376ea9, #4c99de);
}

body[data-theme="solarized-slate"] .tiny-loop input[type="checkbox"] {
  border-color: #53729c;
  background: #162945;
}

body[data-theme="solarized-slate"] .tiny-loop input[type="checkbox"]::after {
  background: #aac1e2;
}

body[data-theme="solarized-slate"] .tiny-loop input[type="checkbox"]:checked {
  border-color: #72b4f3;
  background: #25578c;
}

body[data-theme="solarized-slate"] .tiny-loop input[type="checkbox"]:checked::after {
  background: #edf6ff;
}

body[data-theme="solarized-slate"] .viewer {
  border-color: #3c577a;
  background:
    radial-gradient(1000px 550px at 50% 80%, rgba(74, 136, 212, 0.24), transparent 75%),
    linear-gradient(165deg, #0c1726, #12263b);
}

body[data-theme="solarized-slate"] .stage-glow {
  background:
    linear-gradient(to right, rgba(122, 175, 234, 0.1), transparent 18%, transparent 82%, rgba(122, 175, 234, 0.1)),
    radial-gradient(60% 45% at 50% 50%, rgba(99, 179, 255, 0.12), transparent 75%);
}

body[data-theme="solarized-slate"] .moving-text {
  color: #f4f8ff;
}

body[data-theme="solarized-slate"] code {
  color: #a6d9ff;
}

body[data-theme="paper-copper"] {
  color: #2d1f13;
  background:
    radial-gradient(1200px 700px at 20% 10%, #f0e0c5 0%, transparent 58%),
    radial-gradient(900px 600px at 90% 70%, #e7d2b2 0%, transparent 60%),
    linear-gradient(145deg, #f8f2e7, #eadcc5);
}

body[data-theme="paper-copper"] .panel {
  border-color: #bea88b;
  background: #f3e8d8;
}

body[data-theme="paper-copper"] .subhead,
body[data-theme="paper-copper"] .hint,
body[data-theme="paper-copper"] .status,
body[data-theme="paper-copper"] .viewer-help,
body[data-theme="paper-copper"] .tiny-loop {
  color: #78644d;
}

body[data-theme="paper-copper"] .card {
  border-color: #bea88b;
  background: linear-gradient(170deg, #f4ebde, #ebdcc8);
}

body[data-theme="paper-copper"] textarea,
body[data-theme="paper-copper"] select {
  border-color: #bea88b;
  background: #fcf7ef;
  color: #2e2114;
}

body[data-theme="paper-copper"] button {
  border-color: #bea88b;
  background: #e4d6c2;
  color: #463523;
}

body[data-theme="paper-copper"] button:hover {
  background: #dbc9af;
}

body[data-theme="paper-copper"] button.primary {
  border-color: #ae5a23;
  background: linear-gradient(140deg, #9c4e1c, #be6a30);
  color: #fff;
}

body[data-theme="paper-copper"] button.primary:hover {
  background: linear-gradient(140deg, #ae5a23, #cf7a3f);
}

body[data-theme="paper-copper"] .tiny-loop input[type="checkbox"] {
  border-color: #bea88b;
  background: #efe3d2;
}

body[data-theme="paper-copper"] .tiny-loop input[type="checkbox"]::after {
  background: #9f7f61;
}

body[data-theme="paper-copper"] .tiny-loop input[type="checkbox"]:checked {
  border-color: #ae5a23;
  background: #d58a52;
}

body[data-theme="paper-copper"] .tiny-loop input[type="checkbox"]:checked::after {
  background: #fff5eb;
}

body[data-theme="paper-copper"] .viewer {
  border-color: #bea88b;
  background:
    radial-gradient(1000px 550px at 50% 80%, rgba(174, 90, 35, 0.18), transparent 75%),
    linear-gradient(165deg, #efe5d5, #e1cfb5);
}

body[data-theme="paper-copper"] .stage-glow {
  background:
    linear-gradient(to right, rgba(174, 90, 35, 0.09), transparent 18%, transparent 82%, rgba(174, 90, 35, 0.09)),
    radial-gradient(60% 45% at 50% 50%, rgba(201, 126, 74, 0.1), transparent 75%);
}

body[data-theme="paper-copper"] .moving-text {
  color: #3a2818;
  text-shadow: 0 2px 14px rgba(255, 255, 255, 0.4);
}

body[data-theme="paper-copper"] code {
  color: #8f4518;
}

body[data-theme="forest-console"] {
  color: #e5f7e9;
  background:
    radial-gradient(1200px 700px at 20% 10%, #153626 0%, transparent 58%),
    radial-gradient(900px 600px at 90% 70%, #1f4533 0%, transparent 60%),
    linear-gradient(145deg, #07130c, #0d1f15);
}

body[data-theme="forest-console"] .panel {
  border-color: #2e5540;
  background: #0f2016;
}

body[data-theme="forest-console"] .subhead,
body[data-theme="forest-console"] .hint,
body[data-theme="forest-console"] .status,
body[data-theme="forest-console"] .viewer-help,
body[data-theme="forest-console"] .tiny-loop {
  color: #8cb799;
}

body[data-theme="forest-console"] .card {
  border-color: #2e5540;
  background: linear-gradient(170deg, #13281c, #102218);
}

body[data-theme="forest-console"] textarea,
body[data-theme="forest-console"] select {
  border-color: #2e5540;
  background: #0f2117;
  color: #ecfff1;
}

body[data-theme="forest-console"] button {
  border-color: #2e5540;
  background: #153021;
  color: #bfd8c4;
}

body[data-theme="forest-console"] button:hover {
  background: #1c3b2a;
}

body[data-theme="forest-console"] button.primary {
  border-color: #1ea162;
  background: linear-gradient(140deg, #177a4a, #1ea162);
  color: #fff;
}

body[data-theme="forest-console"] button.primary:hover {
  background: linear-gradient(140deg, #1b8f56, #24b772);
}

body[data-theme="forest-console"] .tiny-loop input[type="checkbox"] {
  border-color: #2e5540;
  background: #13281c;
}

body[data-theme="forest-console"] .tiny-loop input[type="checkbox"]::after {
  background: #8cb799;
}

body[data-theme="forest-console"] .tiny-loop input[type="checkbox"]:checked {
  border-color: #1ea162;
  background: #167746;
}

body[data-theme="forest-console"] .tiny-loop input[type="checkbox"]:checked::after {
  background: #eaffef;
}

body[data-theme="forest-console"] .viewer {
  border-color: #2e5540;
  background:
    radial-gradient(1000px 550px at 50% 80%, rgba(30, 161, 98, 0.2), transparent 75%),
    linear-gradient(165deg, #08140d, #0d2116);
}

body[data-theme="forest-console"] .stage-glow {
  background:
    linear-gradient(to right, rgba(30, 161, 98, 0.09), transparent 18%, transparent 82%, rgba(30, 161, 98, 0.09)),
    radial-gradient(60% 45% at 50% 50%, rgba(95, 209, 148, 0.09), transparent 75%);
}

body[data-theme="forest-console"] .moving-text {
  color: #ecfff1;
}

body[data-theme="forest-console"] code {
  color: #5fd194;
}
